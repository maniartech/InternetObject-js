# Section Separator Token Test Cases
# Tests for section separator (---) handling

_meta:
  suite: tokenizer
  category: sections
  version: "1.0.0"
  description: "Section separator token test cases"

section_separators:
  name: section_separators
  description: Tests for section separator tokens
  cases:
    - name: basic_separator
      input: "---"
      expected:
        type: SECTION_SEP
        token: "---"
        value: "---"

    - name: separator_with_content
      input: "a: string\n---\nvalue"
      expected:
        - type: STRING
          subType: OPEN_STRING
          value: "a"
        - type: COLON
          token: ":"
        - type: STRING
          subType: OPEN_STRING
          value: "string"
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: OPEN_STRING
          value: "value"

    - name: separator_at_start
      input: "---\nvalue"
      expected:
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: OPEN_STRING
          value: "value"

    - name: multiple_separators
      input: "a\n---\nb\n---\nc"
      expected:
        - type: STRING
          subType: OPEN_STRING
          value: "a"
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: OPEN_STRING
          value: "b"
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: OPEN_STRING
          value: "c"

# Section with schema and name
section_with_metadata:
  name: section_with_metadata
  description: Tests for section separators with schema/name metadata
  cases:
    - name: separator_with_schema_only
      input: "--- $mySchema"
      expected:
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: SECTION_SCHEMA
          value: "$mySchema"

    - name: separator_with_name_only
      input: "--- mySection"
      expected:
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: SECTION_NAME
          value: "mySection"

    - name: separator_with_name_and_schema
      input: "--- mySection: $mySchema"
      expected:
        - type: SECTION_SEP
          token: "---"
        - type: STRING
          subType: SECTION_NAME
          value: "mySection"
        - type: STRING
          subType: SECTION_SCHEMA
          value: "$mySchema"

# Error cases for sections
error_cases:
  name: error_cases
  description: Section-related error cases
  cases:
    - name: missing_schema_after_colon
      input: "--- mySection:"
      expected_error:
        code: schemaMissing
        message: "Missing schema definition after section separator"

# Note: Most section-related semantic errors are handled at the parser level
# The tokenizer only handles the basic syntax
