# DateTime Token Test Cases
# Tests for datetime literals in various formats

_meta:
  suite: tokenizer
  category: datetime
  version: "1.0.0"
  description: "DateTime token test cases"

date_only:
  name: date_only
  description: Tests for date-only literals
  cases:
    - name: full_date
      input: "d'2024-01-15'"
      expected:
        type: DATETIME
        subType: DATE
        value: "2024-01-15"
        token: "d'2024-01-15'"

    - name: leap_year
      input: "d'2024-02-29'"
      expected:
        type: DATETIME
        subType: DATE
        value: "2024-02-29"
        token: "d'2024-02-29'"

    - name: year_start
      input: "d'2024-01-01'"
      expected:
        type: DATETIME
        subType: DATE
        value: "2024-01-01"
        token: "d'2024-01-01'"

    - name: year_end
      input: "d'2024-12-31'"
      expected:
        type: DATETIME
        subType: DATE
        value: "2024-12-31"
        token: "d'2024-12-31'"

time_only:
  name: time_only
  description: Tests for time-only literals
  cases:
    - name: full_time
      input: "t'14:30:00'"
      expected:
        type: DATETIME
        subType: TIME
        value: "14:30:00"
        token: "t'14:30:00'"

    - name: with_milliseconds
      input: "t'14:30:00.123'"
      expected:
        type: DATETIME
        subType: TIME
        value: "14:30:00.123"
        token: "t'14:30:00.123'"

    - name: midnight
      input: "t'00:00:00'"
      expected:
        type: DATETIME
        subType: TIME
        value: "00:00:00"
        token: "t'00:00:00'"

    - name: end_of_day
      input: "t'23:59:59'"
      expected:
        type: DATETIME
        subType: TIME
        value: "23:59:59"
        token: "t'23:59:59'"

datetime_combined:
  name: datetime_combined
  description: Tests for datetime literals
  cases:
    - name: basic
      input: "dt'2024-01-15T14:30:00'"
      expected:
        type: DATETIME
        value: "2024-01-15T14:30:00"
        token: "dt'2024-01-15T14:30:00'"

    - name: with_milliseconds
      input: "dt'2024-01-15T14:30:00.123'"
      expected:
        type: DATETIME
        value: "2024-01-15T14:30:00.123"
        token: "dt'2024-01-15T14:30:00.123'"

    - name: with_utc_offset
      input: "dt'2024-01-15T14:30:00Z'"
      expected:
        type: DATETIME
        value: "2024-01-15T14:30:00Z"
        token: "dt'2024-01-15T14:30:00Z'"

    - name: with_positive_offset
      input: "dt'2024-01-15T14:30:00+05:30'"
      expected:
        type: DATETIME
        value: "2024-01-15T14:30:00+05:30"
        token: "dt'2024-01-15T14:30:00+05:30'"

    - name: with_negative_offset
      input: "dt'2024-01-15T14:30:00-08:00'"
      expected:
        type: DATETIME
        value: "2024-01-15T14:30:00-08:00"
        token: "dt'2024-01-15T14:30:00-08:00'"

# Legitimate error cases - all datetime errors use the single invalidDateTime code
error_cases:
  name: error_cases
  description: Legitimate datetime tokenizer error cases
  cases:
    # Invalid date formats
    - name: invalid_month
      input: "d'2024-13-15'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: invalid_day
      input: "d'2024-01-32'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: invalid_leap_day
      input: "d'2023-02-29'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: invalid_date_format
      input: "d'15-01-2024'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: missing_date_parts
      input: "d'2024-01'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    # Invalid time formats
    - name: invalid_hour
      input: "t'25:30:00'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: invalid_minute
      input: "t'14:60:00'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: invalid_second
      input: "t'14:30:60'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: missing_time_parts
      input: "t'14:30'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    # Invalid datetime combined formats
    - name: missing_t_separator
      input: "dt'2024-01-15 14:30:00'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    - name: invalid_timezone
      input: "dt'2024-01-15T14:30:00+25:00'"
      expected_error:
        code: invalidDateTime
        message: "Invalid datetime"

    # Unclosed datetime strings
    - name: unclosed_date
      input: "d'2024-01-15"
      expected_error:
        code: stringNotClosed
        message: "String not closed"

    - name: unclosed_time
      input: "t'14:30:00"
      expected_error:
        code: stringNotClosed
        message: "String not closed"

    - name: unclosed_datetime
      input: "dt'2024-01-15T14:30:00"
      expected_error:
        code: stringNotClosed
        message: "String not closed"
